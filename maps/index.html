<!DOCTYPE html>
<meta charset="utf-8">
<html lang="en-us">
  <head>
    <link href="/colorSummaries/css/merriweather.css" rel="stylesheet" />
    <link href="/maps/maps.css" rel="stylesheet" type="text/css" /> 
    <script type="text/javascript" src="/colorSummaries/js/d3.v4.min.js"></script>
    <script type='text/javascript' src='/maps/helpers.js'></script>
  </head>
  <div class='title'>Ann Nitze Hiking Trail:</div>
  <main role="main">
    <div class='map-img'>
      <path class='trace' />
    </div>

    <div class='footer'></div>
  </main>

  <script>
    // Todo: d3 coordinate finder
    var lineGenerator = d3.line().curve(d3.curveCardinal);

    var container = d3.selectAll('.map-img').selectAll('.trace')
      .append('svg').attr('height', 630).attr('width', 820)

    var imageContainer = d3.selectAll('.map-img')

    imageContainer
      .append('img')
      .attr('src','/maps/topoMap.png')
      .attr('width', 800)
      .attr('height', 618)
      .attr('class','bottom-img')

    // hiking path
    // imageContainer
    //   .append('img')
    //   .attr('src','/maps/mapSfi.png')
    //   .attr('width', 800)
    //   .attr('height', 618)
    //   .attr('class','top-img')

    const mainRoadData = [
      [394,216], [354,178], [336,178], [333,192], [353,218], [352,218], 
      [355,236], [318,288], [289,369], [312,455], [304,503], [268,546],
      [274,610]]

    const hydeParkData = [
      [258,623], [321,568], [405,492], [456,431], [490,317], [518,219],
      [565,128], [608,62], [637,9]]

    const gonzalesData = [
      [2,57], [38,76], [51,125], [55,193], [53,244], [61,267],
      [91,325], [127,396], [175,489], [184,546], [185,622]]

    const wingData = [[37,74],[68,38],[79,7]]

    const buildingData = [
      {t: "translate(392, 198) rotate(-20)", w: 15, h: 8},
      {t: "translate(406, 199) rotate(-20)", w: 9, h: 9},
      {t: "translate(368, 272) rotate(-50)", w: 40, h: 20},
      {t: "translate(398, 288) rotate(-50)", w: 40, h: 8},
      {t: "translate(392, 270) rotate(40)", w: 17, h: 12},
      {t: "translate(405, 255) rotate(40)", w: 17, h: 12},
      {t: "translate(390, 288) rotate(40)", w: 27, h: 12},
      {t: "translate(390, 308) rotate(40)", w: 25, h: 12},
      {t: "translate(390, 328) rotate(40)", w: 23, h: 12},
    ]

    const contdata1 = [[304,9],[316,67],[337,110],[364,146],[405,168],[431,152],[452,106],[493,82],[517,57],[537,26],[553,8]]
    const contdata2 = [[327,9],[343,66],[368,97],[394,112],[415,107],[432,88],[452,73],[476,62],[504,42],[519,22],[530,9]]

    // Contours
    var contours = container.append('g').attr('class','contours')

    var c1 = lineGenerator(contdata1)
    contours.append('path').attr('d', c1);

    var c2 = lineGenerator(contdata2)
    contours.append('path').attr('d', c2);


    // Roads
    var roads = container.append("g").attr('class','roads')

    var wing = lineGenerator(wingData)
    roads.append('path').attr('d', wing);

    var gonzales = lineGenerator(gonzalesData)
    roads.append('path').attr('d', gonzales);

    var hydePark = lineGenerator(hydeParkData)
    roads.append('path').attr('d', hydePark);

    var driveway = lineGenerator(mainRoadData)
    roads.append('path').attr('d', driveway);


    // Campus Buildings
    var mainBuilding = container.append("g")
    var buildingRects = mainBuilding.selectAll('rect')
      .data(buildingData).enter().append('rect')
      .attr("transform", function(d) { return d.t })
      .attr("width", function(d) { return d.w })
      .attr("height", function(d) { return d.h })
      .attr("fill", "grey")

    var accumData = []
    container.on("click", function() {
      accumData.push(d3.mouse(this))
      console.log(JSON.stringify(accumData))
    })

  </script>
</html>
