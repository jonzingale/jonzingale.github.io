<!DOCTYPE html>
<meta charset="utf-8">
<html lang="en-us">
  <head>
    <script src="/js/d3.v4.min.js" type="text/javascript"></script>
    <script src="/js/d3-scale-chromatic.v1.min.js"></script>
    <link href="/js/widget.v3.css" rel="stylesheet" type="text/css" />
    <script src='/js/widget.v3.5.js' type='text/javascript'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
    <link href="/galois/primitive-roots.css" rel="stylesheet" type="text/css" />
  </head>

  <div class='din-title'>primitive roots modulo n</div>
  <main role="main">
    <table>
      <tbody>
        <td width='600'>
          <div class='grid-container'></div>
          <div class='group-controls'></div>
        </td>
        <td>
          <div class='theorem'>
            <b>Nathanson . Theorem 2.18</b><p>
            Let \(G\) be a cyclic group of order \(m\), and let \(a\)
            be a generator of \(G\). For every integer \(k\), the cyclic
            subgroup generated by \(a^k\) has order \(m/d\), where
            \(d=(m,k)\), and \( \langle {a^k} \rangle = \langle {a^d} \rangle \).
            In Particular, \(G\) has exactly \(\phi(m)\) generators.<p>

            <b>proof:</b><p>
            Since \(d=(k,m)\), there exist integers \(x\) and \(y\) such
            that \(d=kx+my\). Then
            
            $$a^d=a^{kx+my}=(a^k)^x(a^m)^y=(a^k)^x$$

            and so \(a^d \in \langle a^k \rangle\) and
            \(\langle a^d \rangle \subset \langle a^k \rangle\).

            Since \(d\) divides \(k\), there exists an integer \(z\)
            such that \(k=dz\). Then

            $$a^k=(a^d)^z,$$

            and so \(a^k \in \langle a^d \rangle\) and
            \(\langle a^k \rangle \subset \langle a^d \rangle\).

            Therefore,
            \(\langle a^k \rangle = \langle a^d \rangle\) and \(a^k\) has
            order \(m/d\). In Particular, \(a^k\) generates \(G\) if and
            only if \(d=1\), ie. if and only if \( (m,k)=1 \), and so
            \(G\) has exactly \(\phi(m)\) generators. This completes the
            proof. \(\Box\)
          </div>
        </td>
      </tbody>
    </table>
    </div>
  </main>

  <script>
    // helpers
    function mod(a,b){ return(((a % b) + b) % b) }
    function div(a,b){ return Math.floor(a/b) }

    var gcd = function(a, b) {
      if ( ! b) { return a }
      return gcd(b, a % b)
    };

    function range(n, ary=[]) {
      for (i=0; i < n; i++) { ary.push(i) }
      return ary
    }

    function primitives(p, tot=[]) {
      var phi = range(p).filter(y => gcd(y,p) == 1)

      phi.forEach(function(i) {
        phi.forEach(function(j){
          tot.push(mod(i*j, p)) 
        })
      })

      return tot
    }

    // radio
    var choices = [5,7,8,11,12,13,16,17,29,23,31,32,61,101]
    var c1 = {id:"ns", name:"n", choices: choices, value:1};

    var controls =
      d3.selectAll(".group-controls").append("svg")
        .attr("class", "group_widgets")

    var radios1 = [
      widget.radio(c1)
      .size(500)
      .label("bottom")
      .orientation("horizontal")
      .shape("rect").fontSize(16)
      .update(resetsystem)
    ]

    var rad1 = controls.selectAll(".radio .r1")
      .data(radios1).enter().append(widget.radioElement)
      .attr("transform",function(d,i){ return "translate(560,11)" });  

    // groups
    const width = 500, k = 0.9
    var gSize = 7

    function render() {
    var prims = primitives(gSize)
    var pLen = Math.sqrt(prims.length)
    var cSize = width / pLen

    var container = 
      d3.selectAll('.grid-container').append('svg')
      .attr('height', width+30).attr('width', width+30)

    var gridContainer = container.append('rect')
      .attr('height', width+10*k)
      .attr('width', width+10*k)
      .attr('class', 'grid')

    var groupContainer = container.append("g")
    var group = groupContainer.selectAll('rect')
      .data(prims).enter().append('rect')
      .attr('transform', 'translate(7,7)')
      .attr("fill", d => d3.interpolateSpectral(d/gSize) )
      .attr('x', (d, i) => cSize * mod(i, pLen) )
      .attr('y', (d, i) => cSize * div(i, pLen) )
      .attr("width", d => cSize * k)
      .attr("height", d => cSize * k)
    }

    function resetsystem(){
      gSize = choices[c1.value]
      d3.select('.grid-container').selectAll("*").remove();
      render()
    }

    render()

  </script>
  <script src='/explorables/js/backButton.js' type="text/javascript"></script>
</html>
