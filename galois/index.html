<!DOCTYPE html>
<meta charset="utf-8">
<html lang="en-us">
  <head>
    <script src="/colorSummaries/js/d3.v4.min.js" type="text/javascript"></script>
    <script src="/explorables/js/d3-scale-chromatic.v1.min.js"></script>
    <link href="/galois/primitive-roots.css" rel="stylesheet" type="text/css" />
    <link href="/galois/widget.v3.css" rel="stylesheet" type="text/css" />
    <script src='/galois/widget.v3.5.js' type='text/javascript'></script>
    <script src='/galois/helpers.js' type='text/javascript'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
  </head>

  <div class='din-title'>primitive roots modulo n</div>
  <main role="main">
    <table>
      <tbody>
        <td>
        <div class='grid-container'></div>
        <div class='group-controls'></div>
      </td>
      <td>
        <div class='theorem'>
          Theorem: 2.18
          $$x = {-b \pm \sqrt{b^2-4ac} \over 2a}.$$
        </div>
      </td>
      </tbody>
    </table>
    </div>
  </main>

  <script>
    // radios
    const n_grid_x = 7, n_grid_y = 9
    var g = widget.grid(600, 100, n_grid_x, n_grid_y);
    var radioblock1 = g.block({x0:10,y0:8,width:6,height:0});
    var choices = [5,7,8,11,12,13,16,17,29,23,31,32,61,101]
    var c1 = {id:"ns", name:"n", choices: choices, value:1};

    var controls =
      d3.selectAll(".group-controls").append("svg")
        .attr("class", "group_widgets")

    var radios1 = [
      widget.radio(c1).size(radioblock1.w()).label("bottom")
      .shape("rect").fontSize(16).orientation("horizontal")
      .update(resetsystem)
    ]

    var rad1 = controls.selectAll(".radio .r1")
      .data(radios1).enter().append(widget.radioElement)
      .attr("transform",function(d,i){ return "translate(620,11)" });  

    // groups
    const width = 500, k = 0.9
    var gSize = 7

    function render() {
    var prims = primitives(gSize)
    var pLen = Math.sqrt(prims.length)
    var cSize = width / pLen

    var container = 
      d3.selectAll('.grid-container').append('svg')
      .attr('height', width+30).attr('width', width+30)

    var gridContainer = container.append('rect')
      .attr('height', width+10*k)
      .attr('width', width+10*k)
      .attr('class', 'grid')

    var groupContainer = container.append("g")
    var group = groupContainer.selectAll('rect')
      .data(prims).enter().append('rect')
      .attr('transform', 'translate(7,7)')
      .attr("fill", d => d3.interpolateSpectral(d/gSize) )
      .attr('x', (d, i) => cSize * mod(i, pLen) )
      .attr('y', (d, i) => cSize * div(i, pLen) )
      .attr("width", d => cSize * k)
      .attr("height", d => cSize * k)
    }

    function resetsystem(){
      gSize = choices[c1.value]
      d3.select('.grid-container').selectAll("*").remove();
      render()
    }

    render()

  </script>
</html>
